<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Eco-Responders Prototype</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --green:#2f5d50;
      --green2:#405a53;
      --bg:#f5f7f6;
      --card:#eef5f2;
      --text:#1f3b34;
      --muted:#455;
      --line:#e6ece9;
    }

    body { font-family: system-ui, Arial, sans-serif; margin: 0; background: var(--bg); line-height: 1.6; }
    header { background:var(--green); color:#fff; padding: 1.0rem 1.25rem; position: sticky; top: 0; z-index: 10; }
    main { max-width: 900px; margin: 0 auto; background: #fff; padding: 1.25rem; }

    h1 { margin: 0; font-size: 1.2rem; }
    h2,h3 { margin-top: 0; color: var(--text); }

    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content: space-between;
      gap: 1rem;
      flex-wrap: wrap;
    }

    /* Small right-side save panel */
    .savePanel{
      display:flex;
      flex-direction: column;
      gap: 0.4rem;
      align-items: flex-end;
      min-width: 220px;
      max-width: 320px;
    }

    .saveRow{
      display:flex;
      gap: 0.5rem;
      align-items: center;
      justify-content: flex-end;
      width: 100%;
    }

    .btn {
      background: var(--green); color:#fff; border:none;
      padding:0.45rem 0.7rem; border-radius: 10px; cursor:pointer;
      font-size: 0.92rem;
      white-space: nowrap;
    }
    .btn.secondary { background: var(--green2); }
    .btn.ghost { background: transparent; border: 1px solid rgba(255,255,255,0.7); color:#fff; }
    .btn:disabled { opacity: 0.6; cursor: not-allowed; }

    .miniInput{
      width: 100%;
      min-height: 34px;
      padding: 0.45rem 0.55rem;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.55);
      font-size: 0.9rem;
      box-sizing: border-box;
      background: rgba(255,255,255,0.12);
      color: #fff;
      outline: none;
    }
    .miniInput::placeholder{ color: rgba(255,255,255,0.75); }

    .hint{
      font-size: 0.82rem;
      opacity: 0.9;
      margin: 0;
      text-align: right;
    }

    .card {
      background: var(--card);
      border-left: 5px solid var(--green);
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 12px;
    }

    .small { font-size: 0.92rem; color: var(--muted); }
    .pill { display:inline-block; padding: 0.15rem 0.55rem; border-radius: 999px; background:#dfece7; color: var(--green); font-size: 0.85rem; }

    .row { display:flex; gap: 0.75rem; flex-wrap: wrap; margin-top: 0.75rem; }

    textarea {
      width: 100%;
      min-height: 120px;
      padding: 0.75rem;
      border-radius: 12px;
      border: 1px solid #cfd8d5;
      font-size: 1rem;
      box-sizing: border-box;
    }

    .hidden { display: none; }
    .divider { border: none; border-top: 1px solid var(--line); margin: 1.25rem 0; }

    .two { display:grid; grid-template-columns: 1fr; gap: 0.75rem; }
    @media (min-width: 780px){ .two { grid-template-columns: 1fr 1fr; } }

    .panel { padding: 0.75rem; background:#fafcfc; border: 1px solid var(--line); border-radius: 12px; }

    .codeBox{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.92rem;
      padding: 0.6rem 0.7rem;
      border: 1px dashed rgba(255,255,255,0.7);
      border-radius: 10px;
      color: #fff;
      background: rgba(0,0,0,0.12);
      width: 100%;
      box-sizing: border-box;
      word-break: break-word;
    }

    /* Make content breathe below sticky header */
    .spacer{ height: 0.75rem; }
  </style>
</head>

<body>
<header>
  <div class="topbar">
    <div>
      <h1>Eco-Responders: After the Fire</h1>
      <p class="hint" style="text-align:left; margin-top:0.25rem;">
        Auto-saves on this device • Use “Save & Exit” to move devices
      </p>
    </div>

    <!-- ✅ Your requested UI: Save & Exit top-right + resume input under it -->
    <div class="savePanel" aria-label="Save and Resume panel">
      <div class="saveRow">
        <button class="btn secondary" id="saveExitBtn">Save & Exit</button>
      </div>

      <input class="miniInput" id="resumeInput" placeholder="Paste Resume Code to continue" />

      <div class="saveRow">
        <button class="btn ghost" id="resumeBtn">Resume</button>
        <button class="btn ghost" id="clearResumeBtn" title="Clear the box">Clear</button>
      </div>

      <!-- Shows a kid-friendly nickname + (optionally) last generated code -->
      <div id="resumeNick" class="codeBox hidden"></div>
      <p class="hint" id="resumeMsg"></p>
    </div>
  </div>
</header>

<div class="spacer"></div>

<main>
  <div class="card">
    <span class="pill">You can revise</span>
    <p class="small" style="margin:0.5rem 0 0;">
      Your writing auto-saves. Revising your thinking is expected—scientists do it constantly.
    </p>
  </div>

  <!-- STEP 1 -->
  <section id="step1">
    <h2>Step 1: First Look</h2>
    <p>
      The air smells faintly of pine and smoke. Two weeks ago, a wildfire swept through Forest Glen.
      Maple Valley sits just downwind.
    </p>

    <h3>Prompt 1</h3>
    <p class="small">What do you think is happening in the ecosystem right now (plants, animals, soil)?</p>
    <textarea data-save="p1_original" placeholder="Type your first thinking here..."></textarea>

    <div class="row">
      <button class="btn" data-next="step2">Next</button>
    </div>
  </section>

  <!-- STEP 2 -->
  <section id="step2" class="hidden">
    <h2>Step 2: Evidence Check</h2>
    <p class="small">Alert: “Dry winds expected. Low humidity. Fire risk remains elevated.”</p>

    <h3>Prompt 2</h3>
    <p class="small">List 2–3 pieces of evidence you would want (weather, plants, human activity, etc.).</p>
    <textarea data-save="p2_original" placeholder="Example: wind speed, fuel moisture, recent lightning..."></textarea>

    <hr class="divider" />

    <h3>Revision Moment</h3>
    <p class="small">
      Re-read your Step 1 thinking. If you want to revise it using what you know now, write a revised version below.
      (Your original is kept.)
    </p>

    <div class="two">
      <div class="panel">
        <div class="small"><strong>Your earlier thinking</strong></div>
        <div id="p1_show" class="small" style="margin-top:0.5rem; white-space: pre-wrap;"></div>
      </div>
      <div class="panel">
        <div class="small"><strong>Your revised thinking</strong></div>
        <textarea data-save="p1_revised" placeholder="Revise your Step 1 response here (optional)..."></textarea>
      </div>
    </div>

    <div class="row">
      <button class="btn ghost" data-prev="step1" style="background:transparent;border:1px solid var(--green);color:var(--green);">Back</button>
      <button class="btn" data-next="step3">Next</button>
    </div>
  </section>

  <!-- STEP 3 -->
  <section id="step3" class="hidden">
    <h2>Step 3: Decision Point</h2>
    <p class="small">Choose what your team investigates next.</p>

    <div class="row">
      <button class="btn" data-choice="branch" data-value="weather">Weather patterns</button>
      <button class="btn" data-choice="branch" data-value="human">Human causes</button>
      <button class="btn" data-choice="branch" data-value="habitat">Habitat recovery</button>
    </div>

    <div id="choice_feedback" class="card hidden" style="margin-top:1rem;"></div>

    <hr class="divider" />

    <div class="row">
      <button class="btn ghost" data-prev="step2" style="background:transparent;border:1px solid var(--green);color:var(--green);">Back</button>
      <button class="btn secondary" id="exportBtn">Export Notes</button>
      <button class="btn ghost" id="resetBtn" style="background:transparent;border:1px solid var(--green);color:var(--green);">Reset</button>
    </div>
  </section>

  <script src="app.js"></script>
</main>
</body>
</html>
